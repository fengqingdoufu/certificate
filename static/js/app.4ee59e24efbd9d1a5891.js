webpackJsonp([1],{EzDZ:function(t,e){},JSXA:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"loadingOnOff",function(){return p});n("briU");var o=n("qM1Q"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=n("X4nt")({name:"App"},a,!1,function(t){n("JSXA")},null,null).exports,r=n("zO6J");n("dAjm");o.a.use(r.a);var c=new r.a({routes:[{path:"/",name:"",redirect:"/index"},{path:"/index",component:function(t){new Promise(function(t){t()}).then(function(){var e=[n("dAjm")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]}),u=n("iDdd"),l=n.n(u),d=n("HVJf"),p=function(t){return t.loadingOnOff},f={},h=n("a3Yh"),m=n.n(h)()({},"SET_LOADING",function(t,e){t.loadingOnOff=e});n("acCT");o.a.use(d.a);var v=new d.a.Store({actions:{},getters:i,state:f,mutations:m,strict:!1,plugins:[]}),g=(n("zO3H"),n("o964")),w=n.n(g);window.onload=window.onresize=function(){!function(t){for(var e,n,i,o,a=navigator.userAgent,s=a.match(/Windows Phone ([\d.]+)/),r=a.match(/(Android);?[\s\/]+([\d.]+)?/),c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,l=c/u,d=t.width||320,p=t.height||504,f=d/p,h=document.querySelectorAll(t.selectors),m=h.length,v=t.mode||"auto",g=t.origin||"left top 0",w="contain"==v?l>f?u/p:c/d:"cover"==v&&l<f?u/p:c/d;--m>=0;)e=v,n=h[m],i=w,o=void 0,(o=n.style).width=d+"px",o.height=p+"px",o.webkitTransformOrigin=g,o.transformOrigin=g,o.webkitTransform="scale("+i+")",o.transform="scale("+i+")","auto"==e&&r?document.body.style.height=p*i+"px":"contain"!=e&&"cover"!=e||(o.position="absolute",o.left=(c-d)/2+"px",o.top=(u-p)/2+"px",o.webkitTransformOrigin="center center 0",o.transformOrigin="center center 0",s?document.body.style.msTouchAction="none":document.ontouchmove=function(t){t.preventDefault()})}({selectors:".page",mode:"contain",width:"375",height:"667"})},o.a.use(w.a),o.a.config.productionTip=!1,l.a.attach(document.body),new o.a({el:"#app",router:c,store:v,render:function(t){return t(s)}})},dAjm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-wrap"},[e("div",{staticClass:"load-bg"},[e("div",{staticClass:"flower"}),this._v(" "),e("div",{staticClass:"flower"}),this._v(" "),e("div",{staticClass:"flower"})])])}]};var o={components:{loading:n("X4nt")({name:""},i,!1,function(t){n("EzDZ")},"data-v-58b63fab",null).exports},data:function(){return{isSuc:!1,imgSrc:"",showHint:!1,loadingOnOff:!1,options:{token:"",imgSrc:"",uploadTimer:"",createCanvasTimer:""}}},methods:{uploadInit:function(){var t=this.$refs.upload,e=window.URL||window.webkitURL,n=void 0,i=this,o=t.files[0];t&&t.files&&t.files[0]&&(n=e.createObjectURL(t.files[0]),this.imgSrc=n),this.isSuc||(this.showHint=!0,setTimeout(function(){i.showHint=!1},2100));var a=o.name,s=("image/"+a.substring(a.lastIndexOf(".")+1,a.length)).toLocaleLowerCase();if(["image/jpeg","image/jpg","image/png"].join().toString().indexOf(s)<0)return alert("只允许上传JPG、PNG格式图片！"),!1;this.uploadCheck(o),this.$refs.upload.value=""},uploadCheck:function(t){var e=this.options.token,n=this;(new Date).getTime();""==e?this.getUploadToken(function(){n.uploadImg(t)}):n.uploadImg(t)},getUploadToken:function(t){var e=this,n=t||function(){};this.$jsonp("http://openstream-beta.mtlab.meitu.com/public/index/qn_token").then(function(t){e.options.token=t,n()})},uploadImg:function(t){var e=this.options.token,n=((new Date).getTime(),new FormData),i=this;n.append("token",e.upload_token),n.append("key",e.key),n.append("file",t);var o=new XMLHttpRequest;o.open("POST","http://up.qiniu.com",!0),o.onreadystatechange=function(t){if(4==o.readyState&&200==o.status&&""!=o.responseText){var n="http://mtapplet.meitudata.com/"+e.key;i.handleImg(n)}else 200!=o.status&&o.responseText&&(i.setLoadingOnOff(!1),alert("上传出错了，请返回重试~"))},o.send(n)},handleImg:function(t){this.$jsonp("http://openstream-beta.mtlab.meitu.com/rolleye/livephoto/index",{pic:t}).then(function(t){})}},created:function(){}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-wrap"},[n("div",{staticClass:"want-play-wrap"},[n("span",{staticClass:"title"},[t._v("我也要玩")]),t._v(" "),n("input",{ref:"upload",staticClass:"btn",attrs:{type:"file",accept:"image/*"},on:{change:t.uploadInit}})]),t._v(" "),n("transition",{attrs:{name:"hint"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showHint,expression:"showHint"}],staticClass:"hint"},[t._v("照片不符合噢！")])]),t._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:t.loadingOnOff,expression:"loadingOnOff"}]})],1)},staticRenderFns:[]};var s=n("X4nt")(o,a,!1,function(t){n("ezAt")},null,null);e.default=s.exports},ezAt:function(t,e){},zO3H:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4ee59e24efbd9d1a5891.js.map